#!/usr/bin/env node

var child_process = require('child_process'), // eslint-disable-line security/detect-child-process
    shell = require('shelljs'),
    chalk = require('chalk'),
    command = 'nyc --cache ./node_modules/.bin/mocha ./tests/unit/**/*.test.js';

module.exports = function (exit) {
    console.log(chalk.bold.yellow('Running unit tests in Updater module...'));
    try {
        child_process.execSync(`${command}`,
            { stdio: 'inherit' });
    }
    catch (e) {
        exit(1);
    }
    exit();
};

!module.parent && module.exports(shell.exit);
